{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/survey.css') }}">

<section class="column">
	<section class="row1">
		<div class="survey-wrapper">
			<p id="ai-message">Loading...</p>

			<h3>Your Response</h3>
			<form id="survey-form">
				<label for="answer">What's your first thought?</label><br>
				<input type="text" id ="answer" name="answer"><br><br>
				<button type=submit>Submit</button>
			</form>

			<script>
				// Get AI-generated message when page loads
				window.onload = async function() {
					const res = await fetch('/generate-intro');
					const data = await res.json();
					document.getElementById('ai-message').innerText = data.response || data.error;
				};

				// Placeholder for future form handling
				document.getElementById('survey-form').addEventListener('submit', function (e) {
					e.preventDefault();
					alert('Response submitted! (This is just a placeholder)')
				});
			</script>
		</div>
	</section>
</section>

{% endblock %}